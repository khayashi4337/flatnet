# Stage 4: ドキュメント整備

## 概要

Phase 1 の成果を他者が再現できるよう、セットアップ手順書とトラブルシューティングガイドを整備する。

## ブランチ戦略

- ブランチ名: `phase1/stage-4-documentation`
- マージ先: `master`

## インプット（前提条件）

- Stage 3 完了（Forgejo が社内 LAN からアクセス可能）
- 実際のセットアップ経験と発生した問題の記録

## 目標

- 別の環境でも手順書通りに構築できる
- よくある問題と解決策がまとまっている
- 運用時の注意点が明確になっている

## 手段

- Stage 1-3 で行った作業を手順書としてまとめる
- 発生した問題と解決策を記録
- 別環境でのテストセットアップを実施

## Sub-stages

### Sub-stage 4.1: セットアップ手順書

**内容:**
- 環境要件のまとめ
  - Windows バージョン
  - WSL2 バージョン
  - Podman バージョン
- OpenResty インストール手順
- WSL2 設定手順
- Forgejo セットアップ手順
- 設定ファイルのテンプレート

**完了条件:**
- [ ] `docs/guides/phase1-setup-guide.md` が完成
- [ ] 設定ファイルのサンプルが `examples/` に配置されている

### Sub-stage 4.2: トラブルシューティングガイド

**内容:**
- よくある問題と解決策
  - OpenResty が起動しない
  - WSL2 に接続できない
  - Forgejo にアクセスできない
  - Git 操作がエラーになる
- ログの確認方法
- デバッグのヒント

**完了条件:**
- [ ] `docs/guides/phase1-troubleshooting.md` が完成

### Sub-stage 4.3: 運用ガイド

**内容:**
- 日常運用で必要な作業
  - WSL2 IP 変更時の対応
  - Forgejo のバックアップ
  - ログの確認・ローテーション
- 再起動手順
- アップデート手順

**完了条件:**
- [ ] `docs/guides/phase1-operations.md` が完成

### Sub-stage 4.4: 検証テスト

**内容:**
- 別の Windows 環境（または同環境のクリーン状態）で手順書を実行
- 不明瞭な点、抜け漏れの洗い出し
- 手順書の修正

**完了条件:**
- [ ] 手順書のみで環境構築が完了することを確認
- [ ] 第三者レビューを実施（可能であれば）

## 成果物

- `docs/guides/phase1-setup-guide.md` - セットアップ手順書
- `docs/guides/phase1-troubleshooting.md` - トラブルシューティングガイド
- `docs/guides/phase1-operations.md` - 運用ガイド
- `examples/openresty/nginx.conf` - nginx.conf サンプル
- `examples/forgejo/run.sh` - Forgejo 起動スクリプトサンプル

## 完了条件

- [ ] セットアップ手順書が完成している
- [ ] トラブルシューティングガイドが完成している
- [ ] 運用ガイドが完成している
- [ ] 別の環境で手順書通りに構築できることを確認済み

## 備考

- ドキュメントは日本語で作成（社内向け）
- 必要に応じてスクリーンショットや図を追加
- Phase 2 以降で変更がある場合は、ドキュメントも更新すること
