# 負荷テスト結果レポート

Phase 4, Stage 5: Validation - Load Test Report

## 1. テスト条件

### 1.1 基本情報

| 項目 | 値 |
|------|-----|
| テスト日時 | YYYY/MM/DD HH:MM - HH:MM |
| テスト担当者 | (記入) |
| テストツール | wrk / hey |
| ツールバージョン | (記入) |

### 1.2 テスト対象

| 項目 | 値 |
|------|-----|
| Gateway URL | http://(WINDOWS_IP)/ |
| テストエンドポイント | / (Forgejo トップページ) |
| テスト元環境 | WSL2 / 社内 LAN 別マシン |

### 1.3 システム状態（テスト開始時）

| 項目 | 値 |
|------|-----|
| CPU 使用率 | ___% |
| メモリ使用率 | ___% |
| ディスク使用率 | ___% |
| 稼働時間 | ___ 時間 |

## 2. 結果サマリー

### 2.1 概要

| 指標 | 結果 | 基準 | 判定 |
|------|------|------|------|
| 最大 RPS | ___ req/s | - | - |
| 推奨同時接続数 | ___ | - | - |
| エラー発生開始点 | ___ 同時接続 | - | - |
| p95 レイテンシ（100接続時） | ___ ms | < 1000 ms | OK/NG |

### 2.2 詳細結果

| 同時接続 | 期間 | RPS | Latency (avg) | Latency (p50) | Latency (p95) | Latency (p99) | Error Rate | 備考 |
|---------|------|-----|---------------|---------------|---------------|---------------|------------|------|
| 10 | 30s | | | | | | | ベースライン |
| 50 | 60s | | | | | | | 中負荷 |
| 100 | 60s | | | | | | | 高負荷 |
| 200 | 60s | | | | | | | 限界テスト |

### 2.3 リソース使用状況（テスト中のピーク値）

| 同時接続 | CPU (Gateway) | CPU (WSL2) | Memory (Gateway) | Memory (WSL2) |
|---------|---------------|------------|------------------|---------------|
| 10 | | | | |
| 50 | | | | |
| 100 | | | | |
| 200 | | | | |

## 3. 詳細分析

### 3.1 スループット分析

```
[スループットグラフをここに挿入 - Grafana からエクスポート]
```

**観察:**
- (スループットの変化パターンを記載)
- (飽和点があれば記載)

### 3.2 レイテンシ分析

```
[レイテンシ分布グラフをここに挿入 - Grafana からエクスポート]
```

**観察:**
- (レイテンシの変化パターンを記載)
- (外れ値があれば記載)

### 3.3 エラー分析

| エラータイプ | 件数 | 発生条件 |
|-------------|------|----------|
| Connection refused | | |
| Timeout | | |
| 5xx Error | | |
| その他 | | |

**観察:**
- (エラーパターンを記載)

## 4. ボトルネック分析

### 4.1 特定されたボトルネック

| ボトルネック | 証拠 | 影響 |
|-------------|------|------|
| (CPU / Memory / Network / Disk / Application) | (メトリクス/ログからの証拠) | (パフォーマンスへの影響) |

### 4.2 分析詳細

**CPU:**
- (分析内容)

**メモリ:**
- (分析内容)

**ネットワーク:**
- (分析内容)

**アプリケーション:**
- (分析内容)

## 5. 比較（前回テストがある場合）

| 指標 | 前回 | 今回 | 変化 |
|------|------|------|------|
| 最大 RPS | | | |
| p95 レイテンシ | | | |
| 推奨同時接続数 | | | |

## 6. 推奨事項

### 6.1 即時対応が必要な項目

| 優先度 | 項目 | 対応内容 | 期待効果 |
|--------|------|----------|----------|
| High | | | |

### 6.2 今後の改善項目

| 優先度 | 項目 | 対応内容 | 期待効果 |
|--------|------|----------|----------|
| Medium | | | |
| Low | | | |

### 6.3 運用上の推奨

- **推奨同時接続数:** ___ (これを超える場合はスケールアウトを検討)
- **監視閾値の調整:**
  - CPU アラート: ___% (現在: 80%)
  - レスポンスタイム: ___ ms (現在: 1000ms)

## 7. テストログ

### 7.1 実行コマンド

```bash
# ベースライン (10 同時接続)
wrk -t2 -c10 -d30s http://<GATEWAY_IP>/

# 中負荷 (50 同時接続)
wrk -t4 -c50 -d60s http://<GATEWAY_IP>/

# 高負荷 (100 同時接続)
wrk -t8 -c100 -d60s http://<GATEWAY_IP>/

# 限界テスト (200 同時接続)
wrk -t8 -c200 -d60s http://<GATEWAY_IP>/
```

### 7.2 生出力

<details>
<summary>ベースライン (10 同時接続)</summary>

```
(wrk の出力をここに貼り付け)
```

</details>

<details>
<summary>中負荷 (50 同時接続)</summary>

```
(wrk の出力をここに貼り付け)
```

</details>

<details>
<summary>高負荷 (100 同時接続)</summary>

```
(wrk の出力をここに貼り付け)
```

</details>

<details>
<summary>限界テスト (200 同時接続)</summary>

```
(wrk の出力をここに貼り付け)
```

</details>

## 8. 結論

### 8.1 総合評価

| 評価 | 説明 |
|------|------|
| (Good / Acceptable / Needs Improvement) | (総合的な評価コメント) |

### 8.2 本番運用への影響

- (本番運用に対する推奨事項)
- (必要な対策)

---

**レポート作成者:** (記入)
**レポート作成日:** YYYY/MM/DD
**レビュー者:** (記入)
**レビュー日:** YYYY/MM/DD
