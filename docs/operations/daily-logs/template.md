# Day X 確認ログ

**日付:** YYYY/MM/DD
**確認者:** (記入)
**確認時刻:** HH:MM

---

## システム状態チェック

### サービス稼働状況

| サービス | 状態 | 確認方法 | 備考 |
|----------|------|----------|------|
| Gateway (OpenResty) | [ ] 稼働中 / [ ] 停止 | HTTP アクセス | |
| CNI Plugin | [ ] 正常 / [ ] 異常 | API 確認 | |
| Prometheus | [ ] 稼働中 / [ ] 停止 | /-/ready | |
| Grafana | [ ] 稼働中 / [ ] 停止 | /api/health | |
| Alertmanager | [ ] 稼働中 / [ ] 停止 | /-/ready | |
| Loki | [ ] 稼働中 / [ ] 停止 | /ready | |
| Forgejo | [ ] 稼働中 / [ ] 停止 | Web UI | |

### コンテナ状態

```
# podman ps の出力を貼り付け
```

---

## メトリクス確認

### リソース使用状況

| 項目 | 値 | 閾値 | 状態 |
|------|-----|------|------|
| CPU 使用率（WSL2） | ___% | < 80% | OK/Warning/Critical |
| メモリ使用率（WSL2） | ___% | < 85% | OK/Warning/Critical |
| ディスク使用率 | ___% | < 80% | OK/Warning/Critical |

### トラフィック（過去 24 時間）

| 項目 | 値 | 前日比 |
|------|-----|--------|
| 総リクエスト数 | ___ | +/- ___% |
| エラーリクエスト数 | ___ | +/- ___% |
| エラー率 | ___% | +/- ___% |

### レスポンスタイム（過去 24 時間）

| パーセンタイル | 値 | 閾値 | 状態 |
|---------------|-----|------|------|
| p50 | ___ ms | - | - |
| p95 | ___ ms | < 1000 ms | OK/NG |
| p99 | ___ ms | < 3000 ms | OK/NG |

---

## ログ確認

### エラーログ確認

- [ ] Gateway error.log 確認済み
- [ ] CNI Plugin ログ確認済み
- [ ] Container ログ確認済み

### 検出されたエラー

| 時刻 | コンポーネント | エラー内容 | 対応 |
|------|---------------|-----------|------|
| | | | |

**異常なログ:** なし / あり（下記参照）

```
# 異常なログがあれば貼り付け
```

---

## アラート確認

### 発報中のアラート

| アラート名 | 発報時刻 | 状態 | 対応 |
|-----------|----------|------|------|
| | | | |

**アラートなし:** [ ]

### 過去 24 時間のアラート履歴

| アラート名 | 発報時刻 | 解消時刻 | 備考 |
|-----------|----------|----------|------|
| | | | |

---

## 日次テスト実施

### 実施したテスト

| テスト | 実施時刻 | 結果 | 備考 |
|--------|----------|------|------|
| Forgejo アクセス | | OK/NG | |
| Git clone | | OK/NG | |
| Git push | | OK/NG | |
| コンテナ停止/起動 | | OK/NG | |

---

## 問題・気づき

### 発生した問題

| 問題 | 発生時刻 | 影響 | 対応 | ステータス |
|------|----------|------|------|-----------|
| | | | | 解決済み/対処中/要調査 |

**問題なし:** [ ]

### 気づいた点・改善案

1. (記載)
2. (記載)

---

## 確認完了

| 項目 | 確認 |
|------|------|
| システム正常稼働 | [ ] |
| 重大な問題なし | [ ] |
| アラート確認済み | [ ] |
| ログ確認済み | [ ] |

**確認者署名:** _______________
**確認完了時刻:** HH:MM

---

## 翌日への申し送り

(翌日の確認者への引き継ぎ事項があれば記載)

---

## 使用方法

1. このテンプレートを `day-1.md`, `day-2.md`, ... としてコピー
2. 各セクションを埋める
3. 問題があれば `known-issues.md` にも記録
4. 完了したら Git にコミット

```bash
cp template.md day-1.md
# 編集後
git add day-1.md
git commit -m "docs: add Day 1 validation check log"
```

---

## クイックリファレンス

### よく使うコマンド

```bash
# ヘルスチェック実行
/home/kh/prj/flatnet/tests/validation/health-check.sh

# コンテナ状態確認
podman ps

# Gateway ログ確認（Windows 側）
# F:\flatnet\openresty\logs\error.log

# メトリクス確認
curl -s http://localhost:9090/api/v1/query?query=up | jq .

# ディスク使用量
df -h /

# メモリ使用量
free -h
```

### 閾値一覧

| 項目 | Warning | Critical |
|------|---------|----------|
| CPU 使用率 | - | 80% (5分間) |
| メモリ使用率 | 85% | - |
| ディスク使用率 | 80% | 90% |
| エラー率 | - | 5% (5分間) |
| p95 レスポンスタイム | - | 1秒 |
